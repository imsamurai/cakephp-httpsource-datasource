{"name":"HttpSource Datasource for CakePHP","tagline":"An abstract datasource for use in conjunction with specific api datasources","body":"## [API Documentation](http://imsamurai.github.io/cakephp-httpsource-datasource/docs/master/)\r\n\r\n\r\n[![Build Status](https://travis-ci.org/imsamurai/cakephp-httpsource-datasource.png)](https://travis-ci.org/imsamurai/cakephp-httpsource-datasource) [![Coverage Status](https://coveralls.io/repos/imsamurai/cakephp-httpsource-datasource/badge.png?branch=master)](https://coveralls.io/r/imsamurai/cakephp-httpsource-datasource?branch=master) [![Latest Stable Version](https://poser.pugx.org/imsamurai/http-source/v/stable.png)](https://packagist.org/packages/imsamurai/http-source) [![Total Downloads](https://poser.pugx.org/imsamurai/http-source/downloads.png)](https://packagist.org/packages/imsamurai/http-source) [![Latest Unstable Version](https://poser.pugx.org/imsamurai/http-source/v/unstable.png)](https://packagist.org/packages/imsamurai/http-source) [![License](https://poser.pugx.org/imsamurai/http-source/license.png)](https://packagist.org/packages/imsamurai/http-source)\r\n\r\n\r\nPlugin with HttpSource to provide base class for datasorses with Http protocol. Based on [ProLoser](https://github.com/ProLoser/CakePHP-Api-Datasources) implementation.\r\nI make some refactoring to make HttpSource more similar to DboSource and removed OAuth component, because i think for login better use [Opauth](https://github.com/uzyn/cakephp-opauth).\r\n\r\nFor existing plugins check [ProLoser](https://github.com/ProLoser/CakePHP-Api-Datasources) readme. But they will not work with HttpSource. I will adapt these plugins later.\r\n\r\n## Notes\r\n\r\n`HttpSource` is an **abstract** class and must be extended by the Api you wish to support.\r\nOpen a bug ticket if you'd like some help making your own or just want me to do it.\r\nIt's _very_ easy to add new ones - [check out the list](#expanding-functionality)\r\n\r\n## Installation\r\n\r\n### Step 1: Clone or download to `Plugin/HttpSource`\r\n\r\n\tcd my_cake_app/app\r\n\tgit clone git://github.com/imsamurai/cakephp-httpsource-datasource.git Plugin/HttpSource\r\n\r\nor if you use git add as submodule:\r\n\r\n\tcd my_cake_app\r\n\tgit submodule add \"git://github.com/imsamurai/cakephp-httpsource-datasource.git\" \"app/Plugin/HttpSource\"\r\n\r\nthen update submodules:\r\n\r\n\tgit submodule init\r\n\tgit submodule update\r\n\r\n### Step 2: Add your configuration to `database.php` and set it to the model\r\n\r\n```\r\n:: database.php ::\r\n```\r\n```php\r\nvar $myapi = array(\r\n\t'datasource' => 'MyPlugin.Http/MyPlugin', // Example: 'Github.Http/Github'\r\n        'host' => 'api.myplugin.com/v1',\r\n        'port' => 80,\r\n        'persistent' => false,\r\n\t\t'auth' => array(\r\n\t\t\t'name' => 'oauth',\r\n\t\t\t'version' => '1.0', //version 2 not tested, maybe don't work\r\n\t\t\t'oauth_consumer_key' => '--Your API Key--',\r\n\t\t\t'oauth_consumer_secret' => '--Your API Secret--'\r\n\t\t),\r\n        //all other parameters that passed to config of http socket\r\n        //...\r\n);\r\n```\r\n```\r\n:: MyModel.php ::\r\n```\r\n```php\r\npublic $useDbConfig = 'myapi';\r\npublic $useTable = 'myapi_table';\r\n\r\n```\r\n\r\n### Step 3: Load main plugin and your plugin\r\n\r\n```\r\n:: bootstrap.php ::\r\n```\r\n```php\r\nCakePlugin::load('HttpSource', array('bootstrap' => true, 'routes' => false));\r\nCakePlugin::load('MyPlugin');\r\n```\r\n\r\n### Step 4: Querying the API\r\n\r\nBest to just give an example. I switch the datasource on the fly because the model is actually a `projects` table in the\r\nDB. I tend to query from my API and then switch to default and save the results.\r\n\r\n```php\r\nApp::uses('HttpSourceModel', 'HttpSource.Model');\r\n\r\nclass Project extends HttpSourceModel {\r\n\tfunction findAuthedUserRepos() {\r\n\t\t$this->setDataSource('github');\r\n\t\t$projects = $this->find('all', array(\r\n                        //used as repo name if useTable is empty, otherwise used as standart fields parameter\r\n\t\t\t'fields' => 'repos'\r\n\t\t));\r\n\t\t$this->setDataSource('default'); // if more queries are done later\r\n\t\treturn $projects;\r\n\t}\r\n}\r\n```\r\n\r\n## Configuration\r\n\r\nSee [wiki](https://github.com/imsamurai/cakephp-httpsource-datasource/wiki).\r\n","google":"UA-54309823-1","note":"Don't delete this file! It's used internally to help with page regeneration."}